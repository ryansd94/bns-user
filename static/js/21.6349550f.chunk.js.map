{"version":3,"sources":["views/signup/JoinTeam/components/JointeamHasAccount.js","views/signup/JoinTeam/components/JoinTeamNoAccount.js","views/signup/JoinTeam/JoinTeam.js"],"names":["JointeamHasAccount","props","history","useHistory","search","useLocation","t","useTranslation","token","queryString","parse","useDispatch","useState","setError","setTokenIsvalid","React","password","confirmPassword","fullName","validationSchema","Yup","shape","useForm","resolver","yupResolver","handleSubmit","register","control","onSubmit","reset","setValue","formState","errors","data","a","find","replace","dataToken","RegExp","isHasAccount","signup","res","errorCode","ERROR_CODE","success","userInfo","accessToken","refreshToken","shopIndex","user","isAdmin","acceptScreen","setTokenLoginSucceeded","push","dirty","msg","title","Grid","container","rowSpacing","item","xs","Button","onClick","variant","JoinTeamNoAccount","setPassword","setLoading","setHasMainAccount","passwordAgain","setPasswordAgain","passwordIsvalid","setPasswordIsvalid","image","values","setValues","replaceAll","str","useEffect","validateToken","validateTokenSignup","status","EUserValidate","IS_HAS_ACCOUNT","required","message","error","fieldNotEmpty","defaultValues","className","onFileChange","src","name","TextInput","autoFocus","label","type","onChange","text","toLowerCase","inputProps","autoComplete","form","startadornment","InputAdornment","position","endadornment","IconButton","showPassword","onMouseDown","event","preventDefault","edge","InputProps","rules","minLength","value","valueAgain","isValid","messages","notEmpty","number","lowercase","match","JoinTeam","loading","hasMainAccount","tokenIsvalid","Spinner","Box","component","sx","m","noValidate","Alert","severity"],"mappings":"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","file":"static/js/21.6349550f.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport TextInput from \"components/input/TextInput\";\nimport Grid from \"@mui/material/Grid\";\nimport Box from \"@mui/material/Box\";\nimport { useTranslation } from \"react-i18next\";\nimport Button from \"@mui/material/Button\";\nimport { useForm } from \"react-hook-form\";\nimport InputAdornment from \"@mui/material/InputAdornment\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport IconButton from \"@mui/material/IconButton\";\nimport * as Yup from \"yup\";\nimport AccountCircle from \"@mui/icons-material/AccountCircle\";\nimport { validateTokenSignup, signup } from \"services\";\nimport { ERROR_CODE, EUserValidate } from \"configs\";\nimport { setTokenLoginSucceeded } from \"helpers\";\n\nimport PasswordChecklist from \"react-password-checklist\";\nimport Spinner from \"components/shared/Spinner\";\nimport { message } from \"configs\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport Visibility from \"@mui/icons-material/Visibility\";\nimport VisibilityOff from \"@mui/icons-material/VisibilityOff\";\n\nconst JointeamHasAccount = (props) => {\n  const history = useHistory();\n  const { search } = useLocation();\n  const { t } = useTranslation();\n  const { token } = queryString.parse(search);\n  const dispatch = useDispatch();\n\n  const [error, setError] = useState(t(\"Token không hợp lệ\"));\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [hasMainAccount, setHasMainAccount] = useState(false);\n  const [passwordAgain, setPasswordAgain] = useState(\"\");\n  const [tokenIsvalid, setTokenIsvalid] = useState(false);\n  const [values, setValues] = React.useState({\n    password: \"\",\n    confirmPassword: \"\",\n    fullName: \"\",\n  });\n  function escapeRegExp(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n  }\n\n  function replaceAll(str, find, replace) {\n    return str.replace(new RegExp(escapeRegExp(find), \"g\"), replace);\n  }\n\n  const validationSchema = Yup.object().shape({});\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n\n  const {\n    register,\n    control,\n    handleSubmit,\n    reset,\n    setValue,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(validationSchema),\n  });\n  const onSubmit = async (data) => {\n    const dataToken = replaceAll(token, \" \", \"+\");\n    data.token = dataToken;\n    data.isHasAccount=true;\n    const res = await signup(data);\n    if (res.errorCode == ERROR_CODE.success) {\n      const userInfo =  res.data;\n      const token = {\n        accessToken: userInfo.token,\n        refreshToken: userInfo.token,\n        shopIndex: userInfo.shopIndex,\n      };\n      const user = { ...userInfo, isAdmin: true, acceptScreen: [] };\n      setTokenLoginSucceeded({ token, user });\n      setTokenIsvalid(true);\n      history.push(`/dashboard`);\n    } else {\n      setTokenIsvalid(false);\n      setError({\n        dirty: true,\n        msg: res.title,\n      });\n    }\n  };\n  return (\n    <Grid container rowSpacing={2}>\n      <Grid item xs={12}>\n        <soan>\n          Bạn nhận được lời mời gia nhập, nhấn vào nút bên dưới để tham gia\n        </soan>\n      </Grid>\n      <Grid item xs={12}>\n        <Button onClick={handleSubmit(onSubmit)} variant=\"contained\">\n          {t(\"Tham gia\")}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\nexport default JointeamHasAccount;\n","import React, { useState, useEffect } from \"react\"\nimport { useLocation, useHistory } from \"react-router-dom\"\nimport queryString from \"query-string\"\nimport TextInput from \"components/input/TextInput\"\nimport Grid from \"@mui/material/Grid\"\nimport { useTranslation } from \"react-i18next\"\nimport Button from \"@mui/material/Button\"\nimport { useForm } from \"react-hook-form\"\nimport InputAdornment from \"@mui/material/InputAdornment\"\nimport { useSelector, useDispatch } from \"react-redux\"\nimport IconButton from \"@mui/material/IconButton\"\nimport * as Yup from \"yup\"\nimport AccountCircle from \"@mui/icons-material/AccountCircle\"\nimport { validateTokenSignup, signup } from \"services\"\nimport { ERROR_CODE, EUserValidate, ESize } from \"configs\"\n\nimport PasswordChecklist from \"react-password-checklist\"\nimport Spinner from \"components/shared/Spinner\"\nimport { message } from \"configs\"\nimport { yupResolver } from \"@hookform/resolvers/yup\"\nimport Visibility from \"@mui/icons-material/Visibility\"\nimport VisibilityOff from \"@mui/icons-material/VisibilityOff\"\nimport { setTokenLoginSucceeded } from \"helpers\"\nimport { UploadAvatarControl } from 'components/avatar'\n\nconst JoinTeamNoAccount = (props) => {\n  const history = useHistory()\n  const { search } = useLocation()\n  const { t } = useTranslation()\n  const { token } = queryString.parse(search)\n  const dispatch = useDispatch()\n\n  const [error, setError] = useState(t(\"Token không hợp lệ\"))\n  const [password, setPassword] = useState(\"\")\n  const [loading, setLoading] = useState(true)\n  const [hasMainAccount, setHasMainAccount] = useState(false)\n  const [passwordAgain, setPasswordAgain] = useState(\"\")\n  const [passwordIsvalid, setPasswordIsvalid] = useState(false)\n  const [tokenIsvalid, setTokenIsvalid] = useState(false)\n  const [selectedFile, setSelectedFile] = useState(null)\n  const [values, setValues] = React.useState({\n    password: \"\",\n    confirmPassword: \"\",\n    fullName: \"\",\n    image: ''\n  })\n  function escapeRegExp(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\") // $& means the whole matched string\n  }\n\n  function replaceAll(str, find, replace) {\n    return str.replace(new RegExp(escapeRegExp(find), \"g\"), replace)\n  }\n\n  useEffect(() => {\n    if (token) {\n      const data = replaceAll(token, \" \", \"+\")\n      validateToken(data)\n    } else setLoading(false)\n  }, [])\n\n  const validateToken = async (token) => {\n    const res = await validateTokenSignup({ token: token })\n    if (res.errorCode == ERROR_CODE.success) {\n      setTokenIsvalid(true)\n      if (res.data && res.data.status == EUserValidate.IS_HAS_ACCOUNT)\n        setHasMainAccount(true)\n    } else {\n      setError(res.title)\n    }\n    setLoading(false)\n  }\n\n  const handleChange = (prop) => (event) => {\n    setValues({ ...values, [prop]: event.target.value })\n  }\n\n  const handleClickShowPassword = () => {\n    setValues({\n      ...values,\n      showPassword: !values.showPassword,\n    })\n  }\n\n  const validationSchema = Yup.object().shape({\n    fullName: Yup.string().required(t(message.error.fieldNotEmpty)),\n    password: Yup.string().required(t(message.error.fieldNotEmpty)),\n    confirmPassword: Yup.string().required(t(message.error.fieldNotEmpty)),\n    // password: Yup.string()\n    //   .required(t(message.error.fieldNotEmpty))\n    //   .min(6, t(\"Mật khẩu tối thiểu 6 ký tự\"))\n    //   .matches(\n    //     /^(?=.*[a-z])(?=.*[0-9])(?=.{6,})/,\n    //     t(\"Mật khẩu phải chứa ít nhất 6 ký tự, bao gồm cả chữ và số\")\n    //   ),\n    // confirmPassword: Yup.string()\n    //   .required(t(message.error.fieldNotEmpty))\n    //   .oneOf([Yup.ref(\"password\")], t(\"Nhập lại mật khẩu không đúng\")),\n  })\n  const defaultValues = {\n    fullName: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    image: ''\n  }\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault()\n  }\n\n  const {\n    register,\n    control,\n    handleSubmit,\n    reset,\n    setValue,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(validationSchema),\n    defaultValues: defaultValues,\n  })\n  const onSubmit = async (data) => {\n    // alert(JSON.stringify(data))\n    // return\n    if (!passwordIsvalid) return\n\n    const dataToken = replaceAll(token, \" \", \"+\")\n    data.token = dataToken\n    data.isHasAccount = false\n    const res = await signup(data)\n    if (res.errorCode == ERROR_CODE.success) {\n      const userInfo = res.data\n      const token = {\n        accessToken: userInfo.token,\n        refreshToken: userInfo.token,\n        shopIndex: userInfo.shopIndex,\n      }\n      const user = { ...userInfo, isAdmin: true, acceptScreen: [] }\n      setTokenLoginSucceeded({ token, user })\n      setTokenIsvalid(true)\n      history.push(`/dashboard`)\n    } else {\n      setTokenIsvalid(false)\n      setError({\n        dirty: true,\n        msg: res.title,\n      })\n    }\n  }\n\n  const onChangePasswordAgain = (text) => {\n    setPasswordAgain(text.toLowerCase())\n  }\n\n  const onChangePassword = (text) => {\n    setPassword(text.toLowerCase())\n  }\n\n  const onFileChange = (src) => {\n    setValue('image', src)\n  }\n\n  return (\n    <Grid container rowSpacing={2}>\n      <Grid item xs={12} className=\"flex-container\">\n        <UploadAvatarControl\n          onFileChange={onFileChange}\n          control={control}\n          name=\"image\"\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <span className=\"text-note\">\n          {t(\"Nhập Họ và tên bạn muốn hiển thị\")}\n        </span>\n      </Grid>\n      <Grid item xs={12}>\n        <TextInput\n          autoFocus={true}\n          required={true}\n          control={control}\n          label={t(\"Họ tên đầy đủ\")}\n          name=\"fullName\"\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <TextInput\n          required={true}\n          control={control}\n          label={t(\"Mật khẩu\")}\n          name=\"password\"\n          type={\"password\"}\n          onChange={onChangePassword}\n          inputProps={{\n            autoComplete: \"new-password\",\n            form: {\n              autoComplete: \"off\",\n            },\n            startadornment: (\n              <InputAdornment position=\"start\">\n                <AccountCircle />\n              </InputAdornment>\n            ),\n            endadornment: (\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"toggle password visibility\"\n                  onClick={handleClickShowPassword}\n                  onMouseDown={handleMouseDownPassword}\n                  edge=\"end\"\n                >\n                  {values.showPassword ? <VisibilityOff /> : <Visibility />}\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <TextInput\n          required={true}\n          control={control}\n          label={t(\"Nhập lại mật khẩu\")}\n          name=\"confirmPassword\"\n          type={\"password\"}\n          onChange={onChangePasswordAgain}\n          InputProps={{\n            autoComplete: \"new-password\",\n            form: {\n              autoComplete: \"off\",\n            },\n          }}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <PasswordChecklist\n          rules={[\"notEmpty\", \"minLength\", \"number\", \"lowercase\", \"match\"]}\n          minLength={6}\n          value={password}\n          valueAgain={passwordAgain}\n          onChange={(isValid) => setPasswordIsvalid(isValid)}\n          messages={{\n            minLength: t(\"Mật khẩu tối thiểu 6 ký tự\"),\n            notEmpty: t(\"Mật khẩu và nhập lại mật khẩu không được trống\"),\n            number: t(\"Mật khẩu phải chứa 1 chữ số\"),\n            lowercase: t(\"Mật khẩu phải chứa 1 ký tự\"),\n            match: t(\"Nhập lại mật khẩu không trùng khớp\"),\n          }}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <Button onClick={handleSubmit(onSubmit)} variant=\"contained\">\n          {t(\"Tham gia\")}\n        </Button>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default JoinTeamNoAccount","import React, { useState, useEffect } from \"react\"\nimport { useLocation } from \"react-router-dom\"\nimport queryString from \"query-string\"\nimport TextInput from \"components/input/TextInput\"\nimport Grid from \"@mui/material/Grid\"\nimport Box from \"@mui/material/Box\"\nimport { useTranslation } from \"react-i18next\"\nimport Button from \"@mui/material/Button\"\nimport { useForm } from \"react-hook-form\"\nimport InputAdornment from \"@mui/material/InputAdornment\"\nimport { useSelector, useDispatch } from \"react-redux\"\nimport IconButton from \"@mui/material/IconButton\"\nimport * as Yup from \"yup\"\nimport AccountCircle from \"@mui/icons-material/AccountCircle\"\nimport { validateTokenSignup, signup } from \"services\"\nimport { ERROR_CODE, EUserValidate } from \"configs\"\nimport Alert from \"@mui/material/Alert\"\n\nimport PasswordChecklist from \"react-password-checklist\"\nimport Spinner from \"components/shared/Spinner\"\nimport { message } from \"configs\"\nimport { yupResolver } from \"@hookform/resolvers/yup\"\nimport Visibility from \"@mui/icons-material/Visibility\"\nimport VisibilityOff from \"@mui/icons-material/VisibilityOff\"\nimport JointeamHasAccount from \"./components/JointeamHasAccount\"\nimport JoinTeamNoAccount from \"./components/JoinTeamNoAccount\"\n\nexport default function JoinTeam() {\n  const { search } = useLocation()\n  const { t } = useTranslation()\n  const { token } = queryString.parse(search)\n  const dispatch = useDispatch()\n\n  const [error, setError] = useState(t(\"Token không hợp lệ\"))\n  const [password, setPassword] = useState(\"\")\n  const [loading, setLoading] = useState(true)\n  const [hasMainAccount, setHasMainAccount] = useState(false)\n  const [passwordAgain, setPasswordAgain] = useState(\"\")\n  const [passwordIsvalid, setPasswordIsvalid] = useState(false)\n  const [tokenIsvalid, setTokenIsvalid] = useState(false)\n  const [values, setValues] = React.useState({\n    password: \"\",\n    confirmPassword: \"\",\n    fullName: \"\",\n  })\n  function escapeRegExp(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\") // $& means the whole matched string\n  }\n\n  function replaceAll(str, find, replace) {\n    return str.replace(new RegExp(escapeRegExp(find), \"g\"), replace)\n  }\n  useEffect(() => {\n    if (token) {\n      const data = replaceAll(token, \" \", \"+\")\n      validateToken(data)\n    } else setLoading(false)\n  }, [])\n  const validateToken = async (token) => {\n    const res = await validateTokenSignup({ token: token })\n    if (res.errorCode == ERROR_CODE.success) {\n      setTokenIsvalid(true)\n      if (res.data && res.data.status == EUserValidate.IS_HAS_ACCOUNT)\n        setHasMainAccount(true)\n    } else {\n      setError(res.title)\n    }\n    setLoading(false)\n  }\n  const handleChange = (prop) => (event) => {\n    setValues({ ...values, [prop]: event.target.value })\n  }\n  const handleClickShowPassword = () => {\n    setValues({\n      ...values,\n      showPassword: !values.showPassword,\n    })\n  }\n\n  const validationSchema = Yup.object().shape({\n    fullName: Yup.string().required(t(message.error.fieldNotEmpty)),\n    // password: Yup.string()\n    //   .required(t(message.error.fieldNotEmpty))\n    //   .min(6, t(\"Mật khẩu tối thiểu 6 ký tự\"))\n    //   .matches(\n    //     /^(?=.*[a-z])(?=.*[0-9])(?=.{6,})/,\n    //     t(\"Mật khẩu phải chứa ít nhất 6 ký tự, bao gồm cả chữ và số\")\n    //   ),\n    // confirmPassword: Yup.string()\n    //   .required(t(message.error.fieldNotEmpty))\n    //   .oneOf([Yup.ref(\"password\")], t(\"Nhập lại mật khẩu không đúng\")),\n  })\n  const defaultValues = {\n    fullName: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n  }\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault()\n  }\n\n  const {\n    register,\n    control,\n    handleSubmit,\n    reset,\n    setValue,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(validationSchema),\n    defaultValues: defaultValues,\n  })\n  const onSubmit = async (data) => {\n    // alert(passwordIsvalid)\n    // return\n    if (!passwordIsvalid) return\n\n    const dataToken = replaceAll(token, \" \", \"+\")\n    data.token = dataToken\n    const res = await signup(data)\n    if (res.errorCode == ERROR_CODE.success) {\n      setTokenIsvalid(true)\n      history.push(`/dashboard`)\n    } else {\n      setTokenIsvalid(false)\n      setError({\n        dirty: true,\n        msg: res.title,\n      })\n    }\n    // dispatch(openMessage({ ...res }))\n  }\n  const onChangePasswordAgain = (text) => {\n    setPasswordAgain(text.toLowerCase())\n  }\n\n  const onChangePassword = (text) => {\n    setPassword(text.toLowerCase())\n  }\n\n  return loading ? (\n    <Spinner className={\"spinnerWrapperMaster\"}></Spinner>\n  ) : (\n    <div>\n      <div className=\"d-flex align-items-center auth px-0\">\n        <div className=\"row w-100 mx-0\">\n          <div className=\"col-lg-4 mx-auto\">\n            <div className=\"auth-form-light text-left py-5 px-4 px-sm-5\">\n              <Box\n                component=\"form\"\n                sx={{\n                  \"& > :not(style)\": { m: 1 },\n                }}\n                noValidate\n                autoComplete=\"off\"\n              >\n                <Grid container rowSpacing={2}>\n                  <Grid item xs={12}>\n                    <h3>{t(\"Tạo tài khoản BNS\")}</h3>\n                  </Grid>\n                  {tokenIsvalid ? (\n                    !hasMainAccount ? (\n                      <JoinTeamNoAccount></JoinTeamNoAccount>\n                    ) : (\n                      <JointeamHasAccount />\n                    )\n                  ) : (\n                    <Alert severity=\"error\">{error}</Alert>\n                  )}\n                </Grid>\n              </Box>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"sourceRoot":""}
(this["webpackJsonpbns-user"]=this["webpackJsonpbns-user"]||[]).push([[19],{1023:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return T}));var n=r(24),a=r(4),u=r(42),c=r(12),s=r(11),o=r.n(s),i=r(1),p=r.n(i),b=r(32),l=r(27),f=r(1028),d=r(1053),h=r(466),x=r(1051),j=r(1039),v=r(1054),m=r(1052),k=r(784),O=r.n(k),w=r(783),g=r.n(w),y=r(159),N=r(504),C=r(714),q=r.n(C),I=r(1046),S=r(17),A=r(203),P=r(948),D=r.n(P),R=(r(886),r(0));function T(){var e=Object(b.g)(),t=p.a.useState({amount:"",password:"",weight:"",shopcode:"",username:"",weightRange:"",showPassword:!1}),s=Object(c.a)(t,2),k=s[0],w=s[1],C=Object(i.useState)(!1),P=Object(c.a)(C,2),T=(P[0],P[1]),U=Object(i.useState)({dirty:!1,msg:""}),F=Object(c.a)(U,2),V=(F[0],F[1]),W=function(e){return function(t){w(Object(u.a)(Object(u.a)({},k),{},Object(a.a)({},e,t.target.value)))}};Object(i.useLayoutEffect)((function(){Object(y.b)()&&e.push("/dashboard")}),[]);A.a.initializeApp({apiKey:"AIzaSyAVvoTuwb55beJbxkPexiu84pLn84IiJws",authDomain:"bns-user.firebaseapp.com"});var z={signInFlow:"redirect",signInSuccessUrl:"/login",signInOptions:[A.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){!function(){var t=A.a.auth().onAuthStateChanged(function(){var t=Object(n.a)(o.a.mark((function t(r){var n,a,c,s,i,p,b;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,r.getIdToken();case 4:return n=t.sent,t.next=7,Object(N.f)({token:n});case 7:a=t.sent,t.t0=a.status,t.next=t.t0===q.a.OK?11:29;break;case 11:if((c=(a&&a).data).errorCode!=S.i.userNotRegister){t.next=17;break}return e.push("/signup?token=".concat(n)),t.abrupt("break",32);case 17:if(c.errorCode==S.i.success){t.next=22;break}return V({dirty:!0,msg:"ta\u0300i hkoa\u0309n ho\u0103\u0323c m\xe2\u0323t kh\xe2\u0309u sai"}),t.abrupt("break",32);case 22:s=a&&a.data,i=s.data,p={accessToken:i.token,refreshToken:i.token,shopIndex:i.shopIndex},b=Object(u.a)(Object(u.a)({},i),{},{isAdmin:!0,acceptScreen:[]}),Object(y.f)({token:p,user:b}),V({dirty:!1,msg:""}),e.push("/dashboard");case 28:return t.abrupt("break",32);case 29:return V({dirty:!0,msg:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i sau"}),Object(y.e)(),t.abrupt("break",32);case 32:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}()}}};function E(){return(E=Object(n.a)(o.a.mark((function t(){var r,n,a,c,s,i,p;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return!0,T(!0),t.next=5,Object(N.e)({userName:k.username,passWord:k.password,shopCode:k.shopcode,remember:!0});case 5:r=t.sent,T(!1),t.t0=r.status,t.next=t.t0===q.a.OK?10:23;break;case 10:if(a=(n=r&&r).data,n.errors,a.errorCode==S.i.success){t.next=16;break}return V({dirty:!0,msg:"ta\u0300i hkoa\u0309n ho\u0103\u0323c m\xe2\u0323t kh\xe2\u0309u sai"}),t.abrupt("break",26);case 16:c=r&&r.data,s=c.data,i={accessToken:s.token,refreshToken:s.token,shopIndex:s.shopIndex},p=Object(u.a)(Object(u.a)({},s),{},{isAdmin:!0,acceptScreen:[]}),Object(y.f)({token:i,user:p}),V({dirty:!1,msg:""}),e.push("/dashboard");case 22:return t.abrupt("break",26);case 23:return V({dirty:!0,msg:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i sau"}),Object(y.e)(),t.abrupt("break",26);case 26:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(R.jsx)("div",{children:Object(R.jsx)("div",{className:"d-flex align-items-center auth px-0",children:Object(R.jsx)("div",{className:"row w-100 mx-0",children:Object(R.jsx)("div",{className:"col-lg-4 mx-auto",children:Object(R.jsxs)("div",{className:"auth-form-light text-left py-5 px-4 px-sm-5",children:[Object(R.jsx)("div",{className:"brand-logo",children:Object(R.jsx)("img",{src:r(958),alt:"logo"})}),Object(R.jsx)("h4",{children:"Hello! let's get started"}),Object(R.jsx)("h6",{className:"font-weight-light",children:"Sign in to continue."}),Object(R.jsxs)(d.a,{component:"form",sx:{"& > :not(style)":{m:1}},noValidate:!0,autoComplete:"off",children:[Object(R.jsxs)(m.a,{fullWidth:!0,className:"row",children:[Object(R.jsx)(j.a,{htmlFor:"component-outlined",children:"ShopCode"}),Object(R.jsx)(x.a,{id:"component-outlined",value:k.shopcode,onChange:W("shopcode"),label:"ShopCode"})]}),Object(R.jsxs)(m.a,{fullWidth:!0,children:[Object(R.jsx)(j.a,{htmlFor:"component-outlined",children:"UserName"}),Object(R.jsx)(x.a,{id:"component-outlined",value:k.username,onChange:W("username"),label:"UserName"})]}),Object(R.jsxs)(m.a,{fullWidth:!0,sx:{m:1},variant:"outlined",children:[Object(R.jsx)(j.a,{htmlFor:"outlined-adornment-password",children:"Password"}),Object(R.jsx)(x.a,{id:"outlined-adornment-password",type:k.showPassword?"text":"password",value:k.password,onChange:W("password"),endAdornment:Object(R.jsx)(v.a,{position:"end",children:Object(R.jsx)(h.a,{"aria-label":"toggle password visibility",onClick:function(){w(Object(u.a)(Object(u.a)({},k),{},{showPassword:!k.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end",children:k.showPassword?Object(R.jsx)(g.a,{}):Object(R.jsx)(O.a,{})})}),label:"Password"})]}),Object(R.jsx)(I.a,{variant:"contained",onClick:function(){return E.apply(this,arguments)},children:"Sign in"})]}),Object(R.jsxs)(f.a,{className:"pt-3",children:[Object(R.jsxs)("div",{className:"my-2 d-flex justify-content-between align-items-center",children:[Object(R.jsx)("div",{className:"form-check",children:Object(R.jsxs)("label",{className:"form-check-label text-muted",children:[Object(R.jsx)("input",{type:"checkbox",className:"form-check-input"}),Object(R.jsx)("i",{className:"input-helper"}),"Keep me signed in"]})}),Object(R.jsx)("a",{href:"!#",onClick:function(e){return e.preventDefault()},className:"auth-link text-black",children:"Forgot password?"})]}),Object(R.jsx)("div",{className:"mb-2",children:Object(R.jsx)(D.a,{uiConfig:z,firebaseAuth:A.a.auth()})}),Object(R.jsxs)("div",{className:"text-center mt-4 font-weight-light",children:["Don't have an account?"," ",Object(R.jsx)(l.b,{to:"/user-pages/register",className:"text-primary",children:"Create"})]})]})]})})})})})}},504:function(e,t,r){"use strict";r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return x})),r.d(t,"h",(function(){return j})),r.d(t,"d",(function(){return k})),r.d(t,"j",(function(){return O})),r.d(t,"l",(function(){return y})),r.d(t,"k",(function(){return N})),r.d(t,"m",(function(){return C})),r.d(t,"i",(function(){return A})),r.d(t,"b",(function(){return P})),r.d(t,"c",(function(){return D})),r.d(t,"a",(function(){return R})),r.d(t,"g",(function(){return T}));var n=r(24),a=r(11),u=r.n(a),c=r(671),s=r.n(c),o=r(714),i=r.n(o),p=r(159),b=r(700),l=r.n(b),f=function(){var e=s.a.create({baseURL:"".concat("http://localhost:5001","/api"),headers:{"content-type":"application/json"},paramsSerializer:function(e){return l.a.stringify(e)}});return e.interceptors.request.use((function(e){var t=Object(p.b)();return e.headers.Authorization="Bearer ".concat(t),e})),e.interceptors.response.use((function(e){return e.status===i.a[200]&&(e.data.status,i.a[200]),e.data}),function(){var e=Object(n.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.config,t.response.status!==i.a.UNAUTHORIZED||r._retry||Object(p.d)(),e.abrupt("return",Promise.reject(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e},d="".concat("http://localhost:5001","/api/account"),h=function(){var e=Object(n.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("".concat(d,"/authenticate"),t);case 3:return r=e.sent,e.abrupt("return",r);case 7:if(e.prev=7,e.t0=e.catch(0),n=e.t0.request,a=e.t0.response,!n){e.next=12;break}return e.abrupt("return",n);case 12:if(!a){e.next=14;break}return e.abrupt("return",a);case 14:return e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(n.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("".concat(d,"/login-google"),t);case 3:return r=e.sent,e.abrupt("return",r);case 7:if(e.prev=7,e.t0=e.catch(0),n=e.t0.request,a=e.t0.response,!n){e.next=12;break}return e.abrupt("return",n);case 12:if(!a){e.next=14;break}return e.abrupt("return",a);case 14:return e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(n.a)(u.a.mark((function e(t){var r,n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(d,"/register-google"),e.next=4,s.a.post(r,t);case 4:return n=e.sent,e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),a=e.t0.request,c=e.t0.response,!a){e.next=13;break}return e.abrupt("return",a);case 13:if(!c){e.next=15;break}return e.abrupt("return",c);case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),v=(f(),"/jm_team"),m=f(),k=function(){var e=Object(n.a)(u.a.mark((function e(t){var r,n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(v,"/").concat(t),e.next=4,m.get(r);case 4:return n=e.sent,e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),a=e.t0.request,c=e.t0.response,!a){e.next=13;break}return e.abrupt("return",a);case 13:if(!c){e.next=15;break}return e.abrupt("return",c);case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(n.a)(u.a.mark((function e(t){var r,n,a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r="".concat(v),t.id){e.next=9;break}return e.next=5,m.post(r,t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.next=11,m.put("".concat(v,"/").concat(t.id),t);case 11:return a=e.sent,e.abrupt("return",a);case 13:e.next=23;break;case 15:if(e.prev=15,e.t0=e.catch(0),c=e.t0.request,s=e.t0.response,!c){e.next=20;break}return e.abrupt("return",c);case 20:if(!s){e.next=22;break}return e.abrupt("return",s);case 22:return e.abrupt("return",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),w=(f(),"/jm_user"),g=f(),y=function(){var e=Object(n.a)(u.a.mark((function e(t){var r,n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(w,"/signup"),e.next=4,g.post(r,t);case 4:return n=e.sent,e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),a=e.t0.request,c=e.t0.response,!a){e.next=13;break}return e.abrupt("return",a);case 13:if(!c){e.next=15;break}return e.abrupt("return",c);case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(n.a)(u.a.mark((function e(t){var r,n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(w,"/add-user"),e.next=4,g.post(r,t);case 4:return n=e.sent,e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),a=e.t0.request,c=e.t0.response,!a){e.next=13;break}return e.abrupt("return",a);case 13:if(!c){e.next=15;break}return e.abrupt("return",c);case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(n.a)(u.a.mark((function e(t){var r,n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(w,"/validate-signup"),e.next=4,g.post(r,t);case 4:return n=e.sent,e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),a=e.t0.request,c=e.t0.response,!a){e.next=13;break}return e.abrupt("return",a);case 13:if(!c){e.next=15;break}return e.abrupt("return",c);case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),q=r(158),I=r.n(q),S=f(),A=function(){var e=Object(n.a)(u.a.mark((function e(t,r){var n,a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n="".concat(t),!I.a.isEmpty(r.id)){e.next=9;break}return e.next=5,S.post(n,r);case 5:return a=e.sent,e.abrupt("return",a);case 9:return e.next=11,S.put("".concat(t,"/").concat(r.id),r);case 11:return c=e.sent,e.abrupt("return",c);case 13:e.next=23;break;case 15:if(e.prev=15,e.t0=e.catch(0),s=e.t0.request,o=e.t0.response,!s){e.next=20;break}return e.abrupt("return",s);case 20:if(!o){e.next=22;break}return e.abrupt("return",o);case 22:return e.abrupt("return",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}(),P=function(){var e=Object(n.a)(u.a.mark((function e(t){var r,n,a,c,s,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:null,e.prev=1,n="".concat(t),r&&(n+=Object(p.a)(r)),e.next=6,S.get(n);case 6:return a=e.sent,e.abrupt("return",a);case 10:if(e.prev=10,e.t0=e.catch(1),c=e.t0.request,s=e.t0.response,!c){e.next=15;break}return e.abrupt("return",c);case 15:if(!s){e.next=17;break}return e.abrupt("return",s);case 17:return e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(n.a)(u.a.mark((function e(t,r){var n,a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(t,"/").concat(r),e.next=4,S.get(n);case 4:return a=e.sent,e.abrupt("return",a);case 8:if(e.prev=8,e.t0=e.catch(0),c=e.t0.request,s=e.t0.response,!c){e.next=13;break}return e.abrupt("return",c);case 13:if(!s){e.next=15;break}return e.abrupt("return",s);case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}(),R=function(){var e=Object(n.a)(u.a.mark((function e(t,r){var n,a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(t,"/").concat(r),e.next=4,S.delete(n);case 4:return a=e.sent,e.abrupt("return",a);case 8:if(e.prev=8,e.t0=e.catch(0),c=e.t0.request,s=e.t0.response,!c){e.next=13;break}return e.abrupt("return",c);case 13:if(!s){e.next=15;break}return e.abrupt("return",s);case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}(),T=function(){var e=Object(n.a)(u.a.mark((function e(t,r){var n,a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(t),e.next=4,S.post(n,r);case 4:return a=e.sent,e.abrupt("return",a);case 8:if(e.prev=8,e.t0=e.catch(0),c=e.t0.request,s=e.t0.response,!c){e.next=13;break}return e.abrupt("return",c);case 13:if(!s){e.next=15;break}return e.abrupt("return",s);case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()},958:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/logo-dark.272879ba.svg"}}]);
//# sourceMappingURL=19.edfddc0d.chunk.js.map